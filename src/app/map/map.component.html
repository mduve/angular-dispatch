  <div class="col-xs-6">
    <mat-horizontal-stepper [linear]="isLinear">
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Select Stocks</ng-template>

        <form class="example-form">
          <mat-form-field class="example-full-width">
            <mat-select placeholder="Pick a Branch" [(ngModel)]="selectedBranch" name="branch" (change)="onSelectChange($event)">
              <mat-option *ngFor="let marker of markers; let i = index" [value]="i"> {{ marker.branch.name }} </mat-option>
            </mat-select>
          </mat-form-field>
        </form>


        <p><strong>{{ branchName }}</strong> {{ branchAddress }}, stock counter  <span class="badge badge-secondary">{{ count }}</span></p>
        <ol class="stocks" style="list-style-type:none;">
          <li 
            *ngFor="let m of markersFiltered; let i = index" 
            (click)="clickedMarker(m, i);" 
            [ngClass]="m.selectable ? 'selected' : 'unselected'">
              {{m.number}}, lat: {{m.lat}}, long: {{m.lng}}, selected: {{ m.selectable }}
          </li>
        </ol>
        <div>
          <button id="review" mat-button matStepperNext [disabled]="buttonState()">Next</button>
        </div>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <ng-template matStepLabel>Select Route</ng-template>

        <p><strong>Start</strong> {{ branchAddress }}</p>
        <ol class="stocks" [dragula]='"another-bag"' [dragulaModel]='many' type="A">
          <ng-container *ngFor="let m of markersFiltered; let i = index">
            <li *ngIf="(m.selectable == true)">
              <!-- ({{i + 1}}) -->  {{m.number}}, lat: {{m.lat}}, long: {{m.lng}}
            </li>
          </ng-container>
        </ol>
        <p><strong>Finish</strong> {{ branchAddress }}</p>
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext>Next</button>
      </div>

      </mat-step> 
      <mat-step><ng-template matStepLabel>Review</ng-template></mat-step>
    </mat-horizontal-stepper>
  </div>
  <div class="col-xs-6">
    <agm-map 
      [latitude]="lat" 
      [longitude]="lng"
      [zoom]="zoom"
      [disableDefaultUI]=false
      [zoomControl]="false"
      [styles]="styles">
      <agm-marker 
        *ngFor="let m of markersFiltered; let i = index" 
        (markerClick)="clickedMarker(m, i);" 
        [latitude]="m.lat" 
        [longitude]="m.lng" 
        [iconUrl]="m.selectable ? '../assets/pin-selected.png' : '../assets/pin-unselected.png'"  
        >
      </agm-marker>

      <agm-marker [latitude]="branchLat" [longitude]="branchLng" [iconUrl]="'../assets/branch.png'"></agm-marker>

    </agm-map>
  </div>